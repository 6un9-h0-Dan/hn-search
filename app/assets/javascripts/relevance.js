!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.algoliaRelevance=t.algoliaRelevance||{})}(this,function(t){"use strict";function e(t,e,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=t+"="+e+";"+o+";path=/"}function i(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}var n=function(t){return"string"==typeof t?document.querySelector(t)||new Error(t+" is not a valid DOM selector"):!(!t||!t.tagName)&&t},o=function(t){return{inputNode:n(t)}},r=function(){var t=i("HAR_ID");if(t&&""!==t)return e("HAR_ID",t,10),t;var n=s();return e("HAR_ID",n,10),n},s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},a=s,c=r,u=function(t){void 0===t&&(t={}),this.indexName=t.indexName,this.searchState=t&&t.searchState?t.searchState:null,this.queryID="",this.userID=c(),this.sessionID=a(),this.searchResults=[],this.typingTimeToConfirmed=0===t.timeoutTime?0:t.timeoutTime||1200,this.currentQuery="",this.previousQuery="",this.clickedObjectID=null,this.applicationID=t.applicationID||"",this.indexName=t.indexName||"",this.initialiseCustomEvent=!1,this.clickedNodePosition=null,this.clickedContainerID=null,this.considerViewedResults=!1,this.didMoveMouseAfterQuery=null,this.navigatedWithoutClicking=!1},d=function(t,e,i){"function"==typeof t.addEventListener?t.addEventListener(e,i):"function"==typeof t.attachEvent&&t.attachEvent(e,i)},h=function(){var t=this;this.previousQuery=this.currentQuery,this.currentQuery=this.inputNode.value||"",this.endedTypingTimeoutID&&window.clearTimeout(this.endedTypingTimeoutID),""!==this.currentQuery&&(this.endedTypingTimeoutID=setTimeout(function(){t.considerViewedResults=!0},this.typingTimeToConfirmed)),this.createReport("search")},l=function(t){var e={event:t,position:this.clickedNodePosition,query:this.currentQuery,userID:this.userID,sessionID:this.sessionID,timestamp:Date.now(),index:this.indexName};"click"===t&&(e.queryID=this.queryID),"function"==typeof this.searchState&&"search"===t&&(e.queryParameters=this.searchState()),this.initialiseCustomEvent||this.sendReport(e,t)},p=function(t,e){var i=this;void 0===e&&(e="search"),this.resetState();var n=JSON.stringify(t),o="http://35.187.7.163:8080/1/"+e,r=new XMLHttpRequest;r.open("POST",o,"click"!==e),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Algolia-API-Key","3fc385cecae0693e0482dc9698d4d66896e7090a5bcdbe00ce63e89abbfc80ff"),r.setRequestHeader("X-Algolia-Application-Id","UJ5WYC0L7X"),r.onreadystatechange=function(){if(4===r.readyState){var t=JSON.parse(r.responseText)||{};200===r.status&&"search"===e&&t.queryID&&(i.queryID=t.queryID)}},r.send(n)},f=function(t,e,i){var n=this;this.initialiseCustomEvent=!0,setTimeout(function(){var o={event:t,eventValue:e,position:n.clickedNodePosition,hitsContainerID:n.clickedContainerID,query:n.currentQuery,indexName:n.indexName,applicationID:n.applicationID,UUID:n.UUID},r=Object.assign({},o,i);n.sendReport(r)},0)},v=function(){this.initialiseCustomEvent=!1,this.considerViewedResults=!1,this.navigatedWithoutClicking=!1,this.clickedObjectID=null,this.clickedNodePosition=null,this.clickedContainerID=null},y=function(t,e,i,n){return this.navigatedWithoutClicking=!1,Array.prototype.slice.call(e.querySelectorAll("[data-algolia-objectid]")).indexOf(t)+1},x=function(t,e){for(var i=t;i.parentNode;){var n=i.getAttribute("data-algolia-hitscontainer");if(n)return{clickedContainer:i,containerID:n};i=i.parentNode}},g=function(t){for(var e=t&&t.target?t.target:null;e.parentNode;){var i=e.getAttribute("data-algolia-objectid");if(i)return{clickedHit:e,hitID:i};e=e.parentNode}};"function"!=typeof Object.assign&&(Object.assign=function(t,e){var i=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var r=i[o];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n});var D=function(t){void 0===t&&(t={}),this.options=t||{},this.bindSettings=u.bind(this),this.storeQuery=h.bind(this),this.didClickOnResults=g.bind(this),this.createReport=l.bind(this),this.resetState=v.bind(this),this.onHitNodeMatch=y.bind(this),this.sendReport=p.bind(this),this.getHitsContainer=x.bind(this),this.customEvent=f.bind(this),this.bindSettings(t),this.initSearch=this.initSearch.bind(this),this.endedTypingTimeoutID=null,window.ar=this};D.prototype.initSearch=function(t){var e=this,i=o(t);this.inputNode=i.inputNode,this.inputNode&&(d(this.inputNode,"input",this.storeQuery),this.storeQuery(),d(document,"click",function(t){var i,n=e.didClickOnResults(t);if(n&&(i=e.getHitsContainer(n.clickedHit,n.hitID)),i&&n){var o=e.onHitNodeMatch(n.clickedHit,i.clickedContainer,n.hitID,i.containerID);e.clickedNodePosition=o,e.clickedObjectID=n.hitID,e.clickedContainerID=i.containerID,e.createReport("click")}}))},t.algoliaRelevance=D,Object.defineProperty(t,"__esModule",{value:!0})});
